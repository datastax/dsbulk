environment:
  appveyor_build_worker_cloud: gce
  test_profile: default
  matrix:
    - java_version: 1.8.0
platform: x64
init:
  - git config --global core.autocrlf true
install:
  - ps: .\appveyor.ps1
build_script:
  - (new-object System.Net.WebClient).DownloadFile('https://datastax.jfrog.io/datastax/datastax-releases-local/com/datastax/dse/dse-java-driver-core/1.6.5/dse-java-driver-core-1.6.5.jar','driver.jar')
  - (new-object System.Net.WebClient).DownloadFile('https://datastax.jfrog.io/datastax/datastax-releases-local/com/datastax/dse/dse-java-driver-core/1.6.5/dse-java-driver-core-1.6.5.pom','driver.pom')
  - mvn install:install-file -Dfile=driver.jar -DpomFile=driver.pom
  - mvn install -DskipTests=true -B -V
test_script:
  - mvn verify -B
on_finish:
  - ps: .\uploadtests.ps1
cache:
  - C:\Users\appveyor\.m2
